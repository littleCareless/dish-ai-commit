name: Release Please

on:
  push:
    branches:
      - develop

permissions:
  contents: write
  pull-requests: write

jobs:
  release-please:
    runs-on: ubuntu-latest
    steps:
      - uses: googleapis/release-please-action@v4
        id: release
        with:
          # (æ¨è) ä½¿ç”¨ä¸ªäººè®¿é—®ä»¤ç‰Œ (PAT) è€Œéé»˜è®¤çš„ GITHUB_TOKEN
          # è¿™å¯ä»¥ç¡®ä¿å‘å¸ƒåèƒ½è§¦å‘å…¶ä»– GitHub Actions, ä¾‹å¦‚è‡ªåŠ¨éƒ¨ç½²æˆ– npm å‘å¸ƒ
          # 1. åœ¨ GitHub åˆ›å»ºä¸€ä¸ªæœ‰ repo å’Œ workflow æƒé™çš„ PAT
          # 2. åœ¨ä»“åº“çš„ Secrets and variables > Actions ä¸­æ·»åŠ ä¸€ä¸ªåä¸º RELEASE_PLEASE_TOKEN çš„ secret
          # token: ${{ secrets.RELEASE_PLEASE_TOKEN }}

          # å¯¹äºç®€å•é¡¹ç›®ï¼Œæˆ–è€…ä¸éœ€è¦è§¦å‘åç»­å·¥ä½œæµçš„åœºæ™¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ GITHUB_TOKEN
          token: ${{ secrets.GITHUB_TOKEN }}

          # å‘Šè¯‰ release-please è¿™æ˜¯ä¸€ä¸ª Node.js é¡¹ç›®
          # å®ƒä¼šè‡ªåŠ¨å¤„ç† package.json, package-lock.json å’Œ CHANGELOG.md
          release-type: node

          # (å¯é€‰) è‡ªå®šä¹‰åˆ›å»ºçš„ Release PR çš„æ ‡é¢˜
          # pull-request-title: "chore(release): release ${version}"

          # (å¯é€‰) è‡ªå®šä¹‰ç”Ÿæˆçš„ CHANGELOG çš„ç« èŠ‚æ ‡é¢˜
          # è¿™èƒ½è®©ä½ çš„æ—¥å¿—æ›´æ¸…æ™°ï¼Œæ›´ç¬¦åˆä¸­æ–‡ä¹ æƒ¯
          # changelog-types: >
          #   [
          #     { "type": "feat", "section": "âœ¨ æ–°åŠŸèƒ½", "hidden": false },
          #     { "type": "fix", "section": "ğŸ› Bug ä¿®å¤", "hidden": false },
          #     { "type": "perf", "section": "ğŸš€ æ€§èƒ½ä¼˜åŒ–", "hidden": false },
          #     { "type": "revert", "section": "âª å›æ»š", "hidden": false },
          #     { "type": "docs", "section": "ğŸ“ æ–‡æ¡£", "hidden": false },
          #     { "type": "style", "section": "ğŸ’„ é£æ ¼", "hidden": true },
          #     { "type": "chore", "section": "ğŸ§¹ æ‚é¡¹", "hidden": false },
          #     { "type": "refactor", "section": "â™»ï¸ é‡æ„", "hidden": false },
          #     { "type": "test", "section": "âœ… æµ‹è¯•", "hidden": true },
          #     { "type": "build", "section": "ğŸ“¦ æ„å»º", "hidden": true },
          #     { "type": "ci", "section": "ğŸ¤– CI/CD", "hidden": true }
          #   ]`
